# run_jsnapy_tests/tests/test_version.yml

test_metadata:
  description: "Checks the running Junos software version."
  category: "System Information"
  production_approved: true
  safety_level: "safe"
  # This test doesn't produce a table, so no display_hints are needed.

tests_include:
  - test_junos_version_is_present

test_junos_version_is_present:
  - rpc: get-software-information
  # 'item' is a valid but older way. 'iterate' or simple xpath is more common.
  # Let's use a simple 'exists' check which is cleaner for this purpose.
  - xpath: /software-information/junos-version
    tests:
      - exists: true
        err: "❌ Could not find Junos version in RPC output."
        info: "✅ Found Junos version element."
      - not-equal: "" # A simple check to ensure the version string isn't empty
        err: "❌ Junos version string is empty!"
        info: "✅ Junos version is: {{post}}." # 'post' refers to the value of the xpath element
